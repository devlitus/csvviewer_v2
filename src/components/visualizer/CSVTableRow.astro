---
import CategoryBadge from "./CategoryBadge.astro";
import Icon from "../ui/Icon.astro";

interface Column {
  key: string;
  label: string;
  align?: "left" | "right";
}

interface Props {
  row: Record<string, any>;
  columns: Column[];
  alternate?: boolean;
}

const { row, columns, alternate = false } = Astro.props;
const bgClass = alternate ? "bg-surface-card/20" : "bg-background-dark";
---

<tr class={`${bgClass} hover:bg-surface-card/40 transition-colors group`}>
  {
    columns.map((col) => {
      const value = row[col.key];
      const isRight = col.align === "right";
      return (
        <td
          data-col={col.key}
          class={`px-6 py-3.5 ${isRight ? "text-right" : ""}`}
        >
          {col.key === "category" ? (
            <CategoryBadge category={value} />
          ) : (
            <span
              class={
                col.key === "id"
                  ? "font-mono text-text-light-gray"
                  : "text-text-off-white"
              }
            >
              {value}
            </span>
          )}
        </td>
      );
    })
  }
  <td class="px-4 py-3.5 text-right">
    <button
      class="text-text-light-gray hover:text-vibrant-blue opacity-0 group-hover:opacity-100 transition-all"
    >
      <Icon name="edit" size="sm" />
    </button>
  </td>
</tr>
