---
import FileTableRow from './FileTableRow.astro';
import Pagination from './Pagination.astro';

interface FileData {
  id: string;
  filename: string;
  dateUploaded: string;
  fileSize: string;
  status: 'processed' | 'mapping_needed' | 'error';
  icon: string;
  iconColor: string;
}

interface Props {
  files?: FileData[];
}

const {
  files = [
    {
      id: '1',
      filename: 'sales_data_q3.csv',
      dateUploaded: '2 hours ago',
      fileSize: '2.4 MB',
      status: 'processed',
      icon: 'table_view',
      iconColor: 'green'
    },
    {
      id: '2',
      filename: 'inventory_list_2023.xlsx',
      dateUploaded: 'Yesterday, 4:20 PM',
      fileSize: '840 KB',
      status: 'processed',
      icon: 'inventory_2',
      iconColor: 'blue'
    },
    {
      id: '3',
      filename: 'client_contacts.csv',
      dateUploaded: 'Oct 24, 2023',
      fileSize: '1.2 MB',
      status: 'mapping_needed',
      icon: 'contacts',
      iconColor: 'purple'
    },
    {
      id: '4',
      filename: 'monthly_report_v2.csv',
      dateUploaded: 'Oct 22, 2023',
      fileSize: '4.5 MB',
      status: 'error',
      icon: 'error',
      iconColor: 'red'
    },
    {
      id: '5',
      filename: 'archived_marketing_leads.csv',
      dateUploaded: 'Sep 15, 2023',
      fileSize: '12.1 MB',
      status: 'processed',
      icon: 'analytics',
      iconColor: 'gray'
    },
    {
      id: '6',
      filename: 'customer_feedback_survey.csv',
      dateUploaded: 'Sep 08, 2023',
      fileSize: '3.1 MB',
      status: 'processed',
      icon: 'dataset',
      iconColor: 'blue'
    }
  ]
} = Astro.props as Props;
---

<div class="h-full border border-border-dark/50 rounded-xl bg-background-dark overflow-hidden flex flex-col">
  <!-- Tabla con scroll -->
  <div class="overflow-y-auto">
    <table class="w-full text-left border-collapse">
      <!-- Thead sticky -->
      <thead class="sticky top-0 bg-background-dark border-b border-border-dark z-10">
        <tr>
          <th class="px-6 py-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider">
            File Name
          </th>
          <th class="px-6 py-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider">
            Date Uploaded
          </th>
          <th class="px-6 py-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider">
            File Size
          </th>
          <th class="px-6 py-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider">
            Status
          </th>
          <th class="px-6 py-4 text-right"></th>
        </tr>
      </thead>

      <!-- Tbody -->
      <tbody class="divide-y divide-border-dark/40">
        {files.map(file => (
          <FileTableRow
            filename={file.filename}
            dateUploaded={file.dateUploaded}
            fileSize={file.fileSize}
            status={file.status}
            icon={file.icon}
            iconColor={file.iconColor}
          />
        ))}
      </tbody>
    </table>
  </div>

  <!-- PaginaciÃ³n -->
  <Pagination />
</div>
