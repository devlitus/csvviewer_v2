---
interface Props {
  filename: string;
  dateUploaded: string;
  fileSize: string;
  status: 'processed' | 'mapping_needed' | 'error';
  icon: string;
  iconColor: string;
}

const {
  filename,
  dateUploaded,
  fileSize,
  status,
  icon,
  iconColor
} = Astro.props as Props;

// Mapeo de colores de iconos
const iconColorSchemes: Record<string, { bg: string; text: string }> = {
  'green': { bg: 'bg-green-500/10', text: 'text-green-400' },
  'blue': { bg: 'bg-vibrant-blue/10', text: 'text-vibrant-blue' },
  'purple': { bg: 'bg-purple-500/10', text: 'text-purple-400' },
  'red': { bg: 'bg-red-500/10', text: 'text-red-400' },
  'gray': { bg: 'bg-gray-500/10', text: 'text-gray-400' },
};

const colorScheme = iconColorSchemes[iconColor] || iconColorSchemes['blue'];

// Mapeo de status a estilos
const statusConfig: Record<string, { classes: string; dotColor: string; text: string }> = {
  'processed': {
    classes: 'bg-green-500/10 text-green-400 border border-green-500/20',
    dotColor: 'bg-green-400',
    text: 'Processed'
  },
  'mapping_needed': {
    classes: 'bg-orange-500/10 text-orange-400 border border-orange-500/20',
    dotColor: 'bg-orange-400',
    text: 'Mapping Needed'
  },
  'error': {
    classes: 'bg-red-500/10 text-red-400 border border-red-500/20',
    dotColor: 'bg-red-400',
    text: 'Error'
  }
};

const statusInfo = statusConfig[status];
---

<tr class="hover:bg-white/5 transition-colors cursor-pointer group">
  <td class="px-6 py-4">
    <div class="flex items-center gap-3">
      <!-- Icono con color background -->
      <div class={`p-2 ${colorScheme.bg} ${colorScheme.text} rounded-lg`}>
        <span class="material-symbols-outlined" style="font-size: 22px;">
          {icon}
        </span>
      </div>
      <!-- Nombre del archivo -->
      <span class="text-sm font-semibold text-text-off-white group-hover:text-vibrant-blue transition-colors">
        {filename}
      </span>
    </div>
  </td>
  <td class="px-6 py-4 text-sm text-text-light-gray">{dateUploaded}</td>
  <td class="px-6 py-4 text-sm text-text-light-gray">{fileSize}</td>
  <td class="px-6 py-4">
    <!-- Status badge con punto -->
    <span class={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${statusInfo.classes}`}>
      <span class={`w-1.5 h-1.5 rounded-full ${statusInfo.dotColor}`}></span>
      {statusInfo.text}
    </span>
  </td>
  <td class="px-6 py-4 text-right">
    <!-- Botón de menú -->
    <button class="text-text-light-gray hover:text-text-off-white p-1 rounded-md hover:bg-white/10 transition-colors">
      <span class="material-symbols-outlined" style="font-size: 20px;">more_vert</span>
    </button>
  </td>
</tr>
