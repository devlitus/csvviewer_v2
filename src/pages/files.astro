---
import AppLayout from "../layouts/AppLayout.astro";
import Sidebar from "../components/layout/Sidebar.astro";
import Header from "../components/layout/Header.astro";
import MainContent from "../components/layout/MainContent.astro";
import FileTable from "../components/files/FileTable.astro";
import ConfirmationModal from "../components/ui/ConfirmationModal.astro";
---

<AppLayout title="DataFlow - My Files">
  <Sidebar currentPage="files" />
  <div class="flex-1 flex flex-col bg-background-dark">
    <Header currentPage="My Files" breadcrumbItems={[{ label: "My Files" }]} />
    <MainContent>
      <!-- Título y botón -->
      <div
        class="flex-shrink-0 px-4 md:px-8 pt-8 flex items-end justify-between"
      >
        <div class="flex flex-col gap-1">
          <h1 class="text-text-off-white text-3xl font-black tracking-tight">
            My Files
          </h1>
          <p class="text-text-light-gray text-sm">
            Manage and organize your processed data sets.
          </p>
        </div>
        <div class="flex items-center gap-3">
          <button
            id="deleteButton"
            class="hidden bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/20 text-sm font-bold h-10 px-6 rounded-lg flex items-center gap-2 transition-all active:scale-95"
          >
            <span class="material-symbols-outlined" style="font-size: 20px;"
              >delete</span
            >
            <span>Delete Selected</span>
          </button>
          <button
            id="uploadButton"
            class="bg-vibrant-blue hover:bg-primary-hover text-white text-sm font-bold h-10 px-6 rounded-lg shadow-md flex items-center gap-2 transition-all active:scale-95"
          >
            <span class="material-symbols-outlined" style="font-size: 20px;"
              >upload</span
            >
            <span>Upload New</span>
          </button>
          <input
            type="file"
            id="fileInput"
            multiple
            accept=".csv"
            class="hidden"
          />
        </div>
      </div>

      <!-- Tabla de archivos -->
      <div class="flex-1 overflow-hidden mt-8 px-4 md:px-8 pb-8">
        <FileTable />
      </div>

      <ConfirmationModal
        id="deleteConfirmModal"
        title="Delete Files"
        description="Are you sure you want to delete the selected files? This action cannot be undone."
        confirmText="Delete"
        confirmType="danger"
      />
    </MainContent>
  </div>

  <script src="../scripts/filesPage.ts"></script>
</AppLayout>
