---
import AppLayout from "../layouts/AppLayout.astro";
import FileTable from "../components/files/FileTable.astro";
import SelectionBar from "../components/files/SelectionBar.astro";
import ConfirmationModal from "../components/ui/ConfirmationModal.astro";
---

<AppLayout
  title="My Files"
  contentClass="flex-1 overflow-hidden flex flex-col px-8 pt-8"
>
  <!-- Header section with title and button -->
  <div class="shrink-0 flex items-end justify-between mb-8">
    <div class="flex flex-col gap-1">
      <h1 class="text-3xl font-black text-text-off-white tracking-tight">
        My Files
      </h1>
      <p class="text-sm text-text-light-gray">
        Manage and organize your processed data sets.
      </p>
    </div>
    <button
      data-upload-button
      class="bg-vibrant-blue hover:bg-primary-hover text-white text-sm font-bold h-10 px-6 rounded-lg shadow-md flex items-center gap-2 transition-all"
    >
      <span class="material-symbols-outlined" style="font-size: 20px;"
        >upload</span
      >
      Upload New
    </button>
  </div>

  <!-- File table -->
  <FileTable>
    <!-- Table rows inserted dynamically via filesPage.ts -->
  </FileTable>

  <!-- Empty state (shown when no files) -->
  <div
    data-empty-state
    class="pointer-events-none absolute inset-0 flex flex-col items-center justify-center opacity-0 transition-opacity"
  >
    <div class="flex justify-center mb-4">
      <div
        class="w-12 h-12 bg-border-dark rounded-full flex items-center justify-center"
      >
        <span class="material-symbols-outlined text-text-light-gray"
          >folder_open</span
        >
      </div>
    </div>
    <p class="text-text-light-gray mb-2">No files uploaded yet</p>
    <p class="text-xs text-text-light-gray">Start by uploading a CSV file</p>
  </div>
</AppLayout>

<!-- Selection bar for bulk actions -->
<SelectionBar />

<!-- Confirmation modal for delete -->
<ConfirmationModal />

<script src="../scripts/filesPage.ts"></script>
